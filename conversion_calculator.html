<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <h2>Glycerol Conversion Calculator</h2>
    <p style='margin: 5px 0 0 0; color: #666;'>Advanced model with normalized parameter impacts</p>
    <style>
        .widget-label {
            min-width: 200px !important;
        }
        .custom-header {
            background-color: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }
        .prediction-box {
            background-color: #e8f4f8;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            border: 2px solid #2c3e50;
            text-align: center;
        }
        .optimal-range {
            color: #27ae60;
            font-size: 0.9em;
            margin-top: 5px;
        }
        .warning-range {
            color: #e74c3c;
            font-size: 0.9em;
            margin-top: 5px;
        }
        .info-text {
            color: #2980b9;
        }# Define optimal ranges with sensitivity and base impacts
OPTIMAL_RANGES = {
    't2': {
        'min': 195, 'max': 205, 'optimal': 200,
        'weight': 0.27,
        'sensitivity': 0.217985,
        'base_impact': 30
    },
    't3': {
        'min': 195, 'max': 205, 'optimal': 200,
        'weight': 0.25,
        'sensitivity': 0.136957,
        'base_impact': 25
    },
    't4': {
        'min': 195, 'max': 205, 'optimal': 200,
        'weight': 0.40,
        'sensitivity': 0.181967,
        'base_impact': 25
    },
    't1': {
        'min': 190, 'max': 200, 'optimal': 195,
        'weight': 0.10,
        'sensitivity': 0.069769,
        'base_impact': 10
    },
    't5': {
        'min': 190, 'max': 200, 'optimal': 195,
        'weight': 0.05,
        'sensitivity': 0.003058,
        'base_impact': 10
    },
    'lhsv': {
        'min': 0.5, 'max': 0.7, 'optimal': 0.6,
        'weight': 0.05,
        'sensitivity': 0.016678,
        'base_impact': 5
    },
    'h2gly_ratio': {
        'min': 6, 'max': 7, 'optimal': 6.5,
        'weight': 0.05,
        'sensitivity': 0.004925,
        'base_impact': 5
    },
    'liquid_feed': {
        'min': 50, 'max': 150, 'optimal': 100,
        'weight': 0.05,
        'sensitivity': 0.000073,
        'base_impact': 5
    },
    'hydrogen_flow': {
        'min': 300, 'max': 600, 'optimal': 450,
        'weight': 0.05,
        'sensitivity': 0.000058,
        'base_impact': 5
    },
    'top_pressure': {
        'min': 20, 'max': 40, 'optimal': 30,
        'weight': 0.05,
        'sensitivity': 0.003176,
        'base_impact': 5
    },
    'bottom_pressure': {
        'min': 15, 'max': 35, 'optimal': 25,
        'weight': 0.05,
        'sensitivity': 0.001230,
        'base_impact': 5
    },
    'feed_ph': {
        'min': 6, 'max': 8, 'optimal': 7,
        'weight': 0.05,
        'sensitivity': 0.010348,
        'base_impact': 5
    }
}
    </style>
</head>
<body>
   <div class='prediction-box'>
                <h2 style='margin: 0; color: #2c3e50;'>Predicted Glycerol Conversion</h2>
                <p style='font-size: 2.5em; margin: 10px 0; color: #2980b9;'>{conversion:.1f}%</p>
            </div> <div style='background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 20px;'>
                <h3 style='margin: 0 0 10px 0; color: #2c3e50;'>Parameter Contributions:</h3>
                <div style='display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;'>
                    <div>
                        <p class='info-text'>Temperature Impacts:</p>
                        <p>T2 (Critical): +{impacts['t2']:.1f}%</p>
                        <p>T3: +{impacts['t3']:.1f}%</p>
                        <p>T4: +{impacts['t4']:.1f}%</p>
                        <p>T1: +{impacts['t1']:.1f}%</p>
                        <p>T5: +{impacts['t5']:.1f}%</p>
                    </div>
                    <div>
                        <p class='info-text'>Process Parameters:</p>
                        <p>LHSV: +{impacts['lhsv']:.1f}%</p>
                        <p>H2:GLY Ratio: +{impacts['h2gly_ratio']:.1f}%</p>
                        <p>Liquid Feed: +{impacts['liquid_feed']:.1f}%</p>
                        <p>Hydrogen Flow: +{impacts['hydrogen_flow']:.1f}%</p>
                    </div>
                    <div>
                        <p class='info-text'>Pressure & pH:</p>
                        <p>Top Pressure: +{impacts['top_pressure']:.1f}%</p>
                        <p>Bottom Pressure: +{impacts['bottom_pressure']:.1f}%</p>
                        <p>Feed pH: +{impacts['feed_ph']:.1f}%</p>
                    </div>
                </div>
            </div><div style='background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 20px;'>
                <h3 style='margin: 0 0 10px 0; color: #2c3e50;'>Operating Guidelines:</h3>
                <ul style='margin: 0; padding-left: 20px;'>
                    <li>Maintain T2-T4 within 195-205Â°C for optimal conversion</li>
                    <li>Keep pressure differential balanced for system stability</li>
                    <li>Monitor pH within optimal range of 6-8</li>
                    <li>Maintain proper H2:GLY ratio for reaction efficiency</li>
                </ul>
            </div>
</body>
</html>
